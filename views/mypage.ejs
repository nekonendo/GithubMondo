<!DOCTYPE html>
<html>
  <!--ヘッド*/-->
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mon-Do</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="/stylesheets/stylesheet1.css" />
    <script src="/javascripts/script1.js" ></script>
  </head>
 
  <!--ボディ-->
  <body>
    <!--ヘッダー呼び出し-->
    <%- include('header'); %>
    <!--本文-->
    <div class="container">

      <!--表示選択ゾーン-->
      <div class="container-header">
        <h1>マイページ</h1>
        <a href="/mypage/create" class="btn btn-mid">新規作成</a>
      </div>
      <div class="select">
        <form action="/mypage/reload" method="post">
          <div class="pulldown">
            <p>科目</p>
            <select name="subject" id="subject" onChange="updateCategory()">
              <option value="">選択してください</option>
              <option value="math" <% if (myselect === 'math') { %>selected<% } %> >数学</option>
              <option value="english" <% if (myselect === 'english') { %>selected<% } %> >英語</option>
              <option value="japanese" <% if (myselect === 'japanese') { %>selected<% } %> >国語</option>
              <option value="sostudy" <% if (myselect === 'sostudy') { %>selected<% } %> >社会</option>
              <option value="science" <% if (myselect === 'science') { %>selected<% } %> >理科</option>
              <option value="zatugaku" <% if (myselect === 'zatugaku') { %>selected<% } %> >雑学</option>
            </select>
            <div class="error-message"><%= subjecterror %></div>
          </div>
          <div class="pulldown">
            <p>区分</p>
            <select name="category" id="category" onChange="updateTangen()"><option value="">選択してください</option></select>
            <div class="error-message"><%= categoryerror %></div>
          </div>
          <div class="pulldown">
            <p>単元</p>
            <select name="tangen" id="tangen"><option value="">選択してください</option></select>
            <div class="error-message"><%= tangenerror %></div>
          </div>
          <div class="pulldown">
            <p>My-MonDo</p>
            <label for="toggle" class="toggle"></label>
            <label for="mymondo"></label><input id="toggle" type="checkbox" name="mymondo" id="mymondo" <% if (mymondo==="on"){ %>checked<% } %>/></label>
            <div class="error-message"><h6></h6></div>
          </div>
          <div class="pulldown">
            
              <input type="submit" value="表示" class="btn-small" formaction="/mypage/reload" />
         
          </div>
        </form>
   
        <form action="/print/check" method="post" id="checkPrint" >
          <div class="pulldown">
            <p>問題数</p>
              <div class="count">
                <select name="quecount" id="quecount">
                  <option value="5">5問</option>
                  <option value="10">10問</option>
                  <option value="15" selected >15問</option>
                </select>
              </div>
          </div>
          <div class="pulldown">
              <input type="hidden" name="subject" value="<%= tableName %>" />
              <input type="hidden" name="category" value="<%= category %>" />
              <input type="hidden" name="tangen" value="<%= tangen %>" />
              <input type="submit" class="btn-small" value="選択印刷" />
              <div class="error-message"><%=checkerror%></div>
          </div>
          
        </div>

      <!--一覧表示ゾーン-->
     
        <div class="index-table-wrapper">
          <div class="table-head">

           <div class="checkbox-container">
              <input type="checkbox" class="checkbox" id="allCheckbox" />
              <label for="allCheckbox">全選択 / 全解除</label> 
           </div>
            <span class="id-column">ID</span>
            <span class="textcategory-column">区分</span>
            <span class="tangen-column">単元</span>
            <span class="question-column">問題</span>
            <span class="answer-column">解答</span>
            <span class="editor-column">作成者</span>
            <span class="date-column">更新日</span>
          </div>
          <ul class="table-body">
            <% lists.forEach((list) =>{ %>
            <li>
              <div class="user-data">
                <div class="checkbox-container">
                <input type="checkbox" class="checkbox" name="check" value="<%= list.id %>" form="checkPrint" /></div>
                <span class="id-column"><%= list.id %></span>
                <span class="textcategory-column"><%= list.categoryLabel %></span>
                <span class="tangen-column"><%= list.tangenLabel %></span>
                <span class="question-column"><%= list.question %></span>
                <span class="answer-column"><%= list.answer %></span>
                <span class="editor-column"><%= list.editor %></span>
                <span class="date-column"><%= list.date %></span>
              </div>

              <div class="list-menu">
                <% if (locals.username===list.editor) { %>
                  <form action="/mypage/delete/<%= list.id %>" method="post">
                    <input type="hidden" name="tableName" value="<%= tableName %>" />
                    <input type="hidden" name="category" value="<%= category %>" />
                    <input type="hidden" name="tangen" value="<%= tangen %>" />
                    <input type="hidden" name="id" value="<%= list.id %>" />
                    <input type="submit" value="削除" />
                  </form>
                  <form action="/mypage/edit/<%= list.id %>" method="post">
                    <input type="hidden" name="tableName" value="<%= tableName %>" />
                    <input type="hidden" name="category" value="<%= category %>" />
                    <input type="hidden" name="tangen" value="<%= tangen %>" />
                    <input type="hidden" name="id" value="<%= list.id %>" />
                    <input type="submit" value="編集" />
                  </form>
                  <% } %>
              </div>
              </li>
            <% }); %>
            </ul>
          </div>
        </form>
    </div>
    <!--フッター呼び出し-->
    <%- include('footer'); %>
  </body>
</html>
